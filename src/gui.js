var Gui={};Gui.signedIn=false;Gui.tracking=false;Gui.following=true;Gui.orientation=true;Gui.initialLoad=true;Gui.selectedLayer=null;Gui.draggedLayerIndex=null;Gui.layerOrderChanged=false;Gui.updateLayout=function(){$("#map").height(window.innerHeight);$("#map").width(window.innerWidth);$("#panelTopics .ui-listview").height(window.innerHeight-90);$("#panelLayerAll").height(window.innerHeight-90);$("#panelLayerOrder .ui-listview").height(window.innerHeight-200);$("#panelFeatureInfo #featureInfoResults").height(window.innerHeight-80);$("#panelSearch .ui-listview").height(window.innerHeight-170);$("#properties").height(window.innerHeight-80)};Gui.panelSelect=function(a){$("#panelTopics").toggle(a==="panelTopics");$("#panelLayerAll").toggle(a==="panelLayerAll");$("#panelLayerOrder").toggle(a==="panelLayerOrder");$("#buttonTopics").toggleClass("selected",a==="panelTopics");$("#buttonLayerAll").toggleClass("selected",a==="panelLayerAll");$("#buttonLayerOrder").toggleClass("selected",a==="panelLayerOrder")};Gui.loadTopics=function(a){var f="";Map.topics={};for(var d=0;d<a.length;d++){var g=a[d];f+='<li data-role="list-provider">'+g.title+"</li>";for(var c=0;c<g.topics.length;c++){var b=g.topics[c];if(b.main_layer!=false){f+='<li class="topic" data-topic="'+b.name+'">';f+='<img src="'+b.icon+'"/>';f+='<p style="white-space:pre-wrap">'+b.title+"</p>";f+="</li>"}Map.topics[b.name]={title:b.title,wms_url:b.wms_url,background_layer:b.background_layer,overlay_layer:b.overlay_layer,minscale:b.minscale,bg_topic:b.bg_topic,overlay_topics:b.overlay_topics}}}$("#topicList").html(f);$("#topicList").listview("refresh");Gui.selectTopic(Config.permalink.initialTopic||Config.data.initialTopic)};Gui.selectTopic=function(a){Map.clearLayers();Map.topic=a;Map.setMinScaleDenom(Map.topics[Map.topic].minscale||Config.map.minScaleDenom.map);Map.backgroundTopic=Map.topics[Map.topic].bg_topic||null;if(Gui.initialLoad){if(Config.permalink.initialBackgroundTopic){Map.backgroundTopic=Config.permalink.initialBackgroundTopic}}if(Map.topics[Map.backgroundTopic]==undefined||!Map.topics[Map.backgroundTopic].background_layer){Map.backgroundTopic=null}Layers.loadLayers(Config.data.layersUrl(a),Gui.loadLayers);if(Map.backgroundTopic!=null){Layers.loadLayers(Config.data.layersUrl(Map.backgroundTopic),Gui.loadBackgroundLayers)}$("#topicList li.topic").removeClass("selected");$("#topicList li.topic[data-topic="+a+"]").addClass("selected")};Gui.loadLayers=function(f){var j="";var d=[];function g(q,p,s){if(q.layers.length>0){j+='<div data-role="collapsible" data-theme="c"';if(Config.gui.useLayertreeGroupCheckboxes){j+=' data-groupcheckbox="true"'}j+=">";j+="<h3>"+q.name+"</h3>"}else{var m=p||Layers.markerPrefix+q.name;var r=$.grep(f.groups,function(i){return i.title===m})[0];if(r!=undefined){var o=$.grep(r.layers,function(i){return i.layername===q.name})[0];j+="<label>";j+='<input type="checkbox" ';if(p!=null){j+='data-role="none" '}j+='name="'+o.layername+'" ';j+='data-layer="'+o.layername+'" ';if(o.visini){j+="checked "}j+=">"+o.toclayertitle;j+="</label>";d.push({layername:o.layername,title:o.toclayertitle,wms_sort:o.wms_sort,visible:o.visini,minscale:o.minscale,maxscale:o.maxscale,hidden_attributes:o.hidden_attributes,hidden_values:o.hidden_values})}}for(var n=0;n<q.layers.length;n++){g(q.layers[n],q.name,s+1)}if(q.layers.length>0){j+="</div>"}}for(var h=0;h<f.layertree.length;h++){g(f.layertree[h],null,0)}$("#panelLayerAll").html(j);$("#panelLayerAll").trigger("create");function c(){var i=$(this).children(".ui-collapsible-content").children("label");i.find(':checkbox[data-role="none"]').attr("data-role",null);i.trigger("create");$(this).unbind("expand",c)}var b=$("#panelLayerAll").find(".ui-collapsible");b.bind("expand",c);$("#panelLayerAll").children(".ui-collapsible[data-groupcheckbox=true]").bind("groupchange",function(i){var m=Map.visibleLayers();$(this).find(":checkbox").each(function(o){var n=(m.indexOf($(this).data("layer"))!=-1);if(n!=$(this).is(":checked")){Map.setLayerVisible($(this).data("layer"),$(this).is(":checked"),false);Gui.updateLayerOrder($(this).data("layer"),$(this).is(":checked"))}})});d=d.sort(function(m,i){return m.wms_sort-i.wms_sort});Map.layers={};for(var h=0;h<d.length;h++){var k=d[h];Map.layers[k.layername]={title:k.title,visible:k.visible,wms_sort:k.wms_sort,minscale:k.minscale,maxscale:k.maxscale,hidden_attributes:k.hidden_attributes,hidden_values:k.hidden_values,transparency:0}}Gui.layerOrderChanged=false;if(Gui.initialLoad){Gui.applyPermalink()}Map.setTopicLayer();Gui.resetLayerOrder();var a=Map.topics[Map.topic].overlay_topics||[];if(Gui.initialLoad&&Config.permalink.initialOverlayTopics!=null){for(var h=0;h<Config.permalink.initialOverlayTopics.length;h++){var l=Config.permalink.initialOverlayTopics[h];if(a.indexOf(l)==-1){a.push(l)}}}Gui.setupOverlayTopics(a);if(Map.backgroundTopic){var j='<label><input type="checkbox" name="_background_" data-background="true" checked>'+I18n.layers.background+"</label>";$("#panelLayerAll").append(j);$("#panelLayerAll").trigger("create");$("#panelLayerAll :checkbox[data-background=true]").bind("change",function(i){Map.toggleBackgroundLayer($(this).is(":checked"))})}Config.permalink.addOverlays(Gui.setSelectionLayer,Gui.setRedliningLayer);if(Gui.initialLoad){Gui.initialLoad=false}$.event.trigger({type:"topiclayersloaded",topic:Map.topic})};Gui.loadBackgroundLayers=function(f){var a=f.groups;var k=[];for(var d=0;d<a.length;d++){var h=a[d];for(var b=0;b<h.layers.length;b++){var c=h.layers[b];if(c.visini){k.push({layername:c.layername,wms_sort:c.wms_sort})}}}k=k.sort(function(j,i){return j.wms_sort-i.wms_sort});var g=[];for(var d=0;d<k.length;d++){g.push(k[d].layername)}Map.backgroundLayers=g.join(",");Map.setBackgroundLayer()};Gui.setupOverlayTopics=function(d){d=$.grep(d,function(g,f){return Map.topics[g]!=undefined&&Map.topics[g].overlay_layer});Map.clearOverlayLayers();$("#overlayTopics").remove();if(d.length>0){var c='<div id="overlayTopics" data-role="collapsible" data-theme="c" data-groupcheckbox="false">';c+="<h3>"+I18n.layers.overlays+"</h3>";for(var b=d.length-1;b>=0;b--){var a=d[b];c+="<label>";c+='<input type="checkbox" ';c+='name="overlayTopic_'+a+'" ';c+='data-overlay_topic="'+a+'" ';c+="checked";c+=">"+Map.topics[a].title;c+="</label>"}c+="</div>";$("#panelLayerAll").append(c);$("#panelLayerAll").trigger("create");for(var b=0;b<d.length;b++){Gui.addOverlayTopicLayer(d[b])}$("#panelLayerAll :checkbox[data-overlay_topic]").bind("change",function(f){Map.toggleOverlayLayer($(this).data("overlay_topic"),$(this).is(":checked"))})}};Gui.addOverlayTopicLayer=function(a){Layers.loadLayers(Config.data.layersUrl(a),function(g){var b=g.groups;var l=[];for(var f=0;f<b.length;f++){var k=b[f];for(var c=0;c<k.layers.length;c++){var d=k.layers[c];if(d.visini){l.push({layername:d.layername,wms_sort:d.wms_sort})}}}l=l.sort(function(j,i){return j.wms_sort-i.wms_sort});var h=[];for(var f=0;f<l.length;f++){h.push(l[f].layername)}Map.addOverlayLayer(a,h)})};Gui.setSelectionLayer=function(b){if(b!=null){var a='<label><input type="checkbox" name="_selection_" data-selection="true" checked>'+I18n.layers.selection+"</label>";$("#panelLayerAll").append(a);$("#panelLayerAll").trigger("create");$("#panelLayerAll :checkbox[data-selection=true]").bind("change",function(c){Map.toggleSelectionLayer($(this).is(":checked"))})}else{$("#panelLayerAll :checkbox[data-selection=true]").parent(".ui-checkbox:first").remove()}Map.setSelectionLayer(b)};Gui.setRedliningLayer=function(b){if(b!=null){var a='<label><input type="checkbox" name="_redlining_" data-redlining="true" checked>'+I18n.layers.redlining+"</label>";$("#panelLayerAll").append(a);$("#panelLayerAll").trigger("create");$("#panelLayerAll :checkbox[data-redlining=true]").bind("change",function(c){Map.toggleRedliningLayer($(this).is(":checked"))})}else{$("#panelLayerAll :checkbox[data-redlining=true]").parent(".ui-checkbox:first").remove()}Map.setRedliningLayer(b)};Gui.resetLayerOrder=function(){var b="";for(var a in Map.layers){if(Map.layers[a].visible){b='<li data-layer="'+a+'" data-wms_sort="'+Map.layers[a].wms_sort+'">'+Map.layers[a].title+"</li>"+b}}$("#listOrder").html(b);$("#listOrder").listview("refresh");Gui.selectLayer(null)};Gui.updateLayerOrder=function(b,d){if(d){var a='<li data-layer="'+b+'" data-wms_sort="'+Map.layers[b].wms_sort+'">'+Map.layers[b].title+"</li>";if(Gui.layerOrderChanged){$("#listOrder").prepend(a)}else{var c=$("#listOrder li").filter(function(){return $(this).data("wms_sort")<Map.layers[b].wms_sort}).first();if(c.length>0){c.before(a)}else{c=$("#listOrder li").filter(function(){return $(this).data("wms_sort")>Map.layers[b].wms_sort}).last();if(c.length>0){c.after(a)}else{$("#listOrder").prepend(a)}}}}else{$('#listOrder li[data-layer="'+b+'"]').remove()}$("#listOrder").listview("refresh");Gui.onLayerOrderChanged(null,null)};Gui.onLayerDrag=function(a,b){Gui.draggedLayerIndex=$("#listOrder li").index(b.item)};Gui.onLayerOrderChanged=function(c,d){if(d!=null){if($("#listOrder li").index(d.item)!=Gui.draggedLayerIndex){Gui.layerOrderChanged=true}}Gui.selectLayer(null);var a={};$($("#listOrder li").get().reverse()).each(function(f){var g=$(this).data("layer");a[g]=Map.layers[g]});for(var b in Map.layers){if(a[b]===undefined){a[b]=Map.layers[b]}}Map.layers=a;Map.refresh()};Gui.selectLayer=function(a){$("#listOrder li").removeClass("selected");Gui.selectedLayer=a;if(Gui.selectedLayer!=null){$('#listOrder li[data-layer="'+a+'"]').addClass("selected");$("#sliderTransparency").val(Map.layers[a].transparency).slider("refresh");$("#sliderTransparency").slider("enable")}else{$("#sliderTransparency").val(0).slider("refresh");$("#sliderTransparency").slider("disable")}};Gui.showFeatureInfoResults=function(a){if(Config.featureInfo.format==="text/xml"){Gui.showXMLFeatureInfoResults(a)}else{$("#featureInfoResults").html(a.join(""))}$("#panelFeatureInfo").panel("open");Map.toggleClickMarker(true)};Gui.showXMLFeatureInfoResults=function(d){var h="";for(var f=0;f<d.length;f++){var q=d[f];var l=Map.layers[q.layer];var o=q.layer;if(l!=undefined){o=l.title}h+='<div data-role="collapsible" data-collapsed="false" data-theme="c">';h+="<h3>"+o+"</h3>";var m=[];if(l!=undefined&&l.hidden_attributes!=undefined){m=l.hidden_attributes}var g=[];if(l!=undefined&&l.hidden_values!=undefined){g=l.hidden_values}for(var c=0;c<q.features.length;c++){var p=q.features[c];var n=p.id===null?I18n.featureInfo.raster:I18n.featureInfo.feature+p.id;h+='<div class="feature" data-role="collapsible" data-collapsed="false" data-theme="c">';h+="<h3>"+n+"</h3>";h+='<ul class="ui-listview-inset ui-corner-all" data-role="listview">';for(var b=0;b<p.attributes.length;b++){var a=p.attributes[b];if($.inArray(a.name,m)==-1&&$.inArray(a.value,g)==-1){h+="<li>";if(a.value.match(/^https?:\/\/.+\..+/i)){h+='<a href="'+a.value+'" target="_blank" class="link">';h+='<span class="name">'+a.name+"</span>";h+="</a>"}else{h+='<span class="name">'+a.name+": </span>";h+='<span class="value">'+a.value+"</span>"}h+="</li>"}}h+="</ul>";h+="</div>"}h+="</div>"}if(d.length==0){h=I18n.featureInfo.noFeatureFound}$("#featureInfoResults").html(h);$("#featureInfoResults").trigger("create")};Gui.showSearchResults=function(f){$("#searchResultsList").empty();for(var d=0;d<f.length;d++){var g=f[d];if(g.category!=null){$("#searchResultsList").append($('<li class="category-title">'+g.category+"</li>"))}for(var c=0;c<g.results.length;c++){var b=g.results[c];var a=$('<li><a href="#">'+b.name+"</a></li>");a.data("bbox",b.bbox);a.data("highlight",b.highlight);$("#searchResultsList").append(a)}}$("#searchResultsList").listview("refresh");$("#searchResults").show();if(f.length===1&&f[0].bbox!=null){Gui.jumpToSearchResult(f[0].bbox);if(f[0].highlight!=undefined){Config.search.highlight(f[0].highlight,Map.setHighlightLayer)}}};Gui.jumpToSearchResult=function(a){Map.zoomToExtent(a,Config.map.minScaleDenom.search);$("#switchFollow").val("off");$("#switchFollow").slider("refresh");Gui.toggleFollowing(false);$("#panelSearch").panel("close")};$(document).bind("pageinit",function(){$("#listOrder").sortable();$("#listOrder").bind("sortstart",Gui.onLayerDrag);$("#listOrder").bind("sortstop",Gui.onLayerOrderChanged)});Gui.updateTranslations=function(){document.title=I18n.title;$("#panelSearch b").html(I18n.search.header);$("#panelSearch #searchResults b").html(I18n.search.results);$("#panelProperties b").html(I18n.properties.header);$("#panelProperties label[for=switchFollow]").html(I18n.properties.mapFollowing);$("#panelProperties label[for=switchOrientation]").html(I18n.properties.mapRotation);$("#panelProperties label[for=switchScale]").html(I18n.properties.scaleBar);$("#panelProperties .ui-slider-label:contains(Ein)").html(I18n.properties.on);$("#panelProperties .ui-slider-label:contains(Aus)").html(I18n.properties.off);$("#panelProperties #buttonLogo .ui-btn-text").html(I18n.properties.about);$("#dlgAbout h1").html(I18n.about.header);$("#panelProperties #buttonShare .ui-btn-text").html(I18n.properties.share);$("#panelProperties #buttonLogin .ui-btn-text").html(I18n.properties.login);$("#panelProperties #buttonLoginSSL .ui-btn-text").html(I18n.properties.login);$("#dlgLogin h1").html(I18n.login.header);$("#dlgLogin label[for=user]").html(I18n.login.user);$("#dlgLogin label[for=password]").html(I18n.login.password);$("#dlgLogin #buttonSignIn .ui-btn-text").html(I18n.login.signIn);$("#dlgLogin #buttonLoginCancel .ui-btn-text").html(I18n.login.cancel);$("#panelProperties #buttonSignOut .ui-btn-text").html(I18n.login.signOut);$("#panelLayer #buttonTopics .ui-btn-text").html(I18n.layers.topics);$("#panelLayer #buttonLayerAll .ui-btn-text").html(I18n.layers.layers);$("#panelLayer #buttonLayerOrder .ui-btn-text").html(I18n.layers.layerOrder);$("#panelLayer #sliderTransparency-label").html(I18n.layers.transparency);$("#panelFeatureInfo b").html(I18n.featureInfo.header)};Gui.toggleFollowing=function(a){Gui.following=a;Map.toggleFollowing(Gui.tracking&&Gui.following)};Gui.toggleOrientation=function(a){Gui.orientation=a;Map.toggleOrientation(Gui.orientation)};Gui.applyPermalink=function(){if(Config.permalink.startExtent!=null){Map.zoomToExtent(Config.permalink.startExtent,null)}else{if(Config.permalink.startCenter!=null){Map.setCenter(Config.permalink.startCenter)}if(Config.permalink.startScale!=null){Map.setScale(Config.permalink.startScale)}else{if(Config.permalink.startZoom!=null){Map.setZoom(Config.permalink.startZoom)}}}var a=function(i,n){Map.layers[i].visible=n;var m=$('#panelLayerAll :checkbox[data-layer="'+i+'"]');if(m.is(":checked")!=n){m.prop("checked",n).checkboxradio("refresh").trigger("change")}};if(Config.permalink.activeLayers!=null){var f=[];var l=false;var h=-1;for(var j in Map.layers){var k=$.inArray(j,Config.permalink.activeLayers);var c=(k!=-1);a(j,c);if(c){f.push({layername:j,sort:k});if(!l){l=(k<h);h=k}}}f=f.sort(function(m,i){return m.sort-i.sort});var g={};for(var d=0;d<f.length;d++){var j=f[d].layername;g[j]=Map.layers[j]}for(var j in Map.layers){if(g[j]===undefined){g[j]=Map.layers[j]}}Map.layers=g;Gui.layerOrderChanged=l}else{if(Config.permalink.inactiveLayers!=null){for(var j in Map.layers){var k=$.inArray(j,Config.permalink.inactiveLayers);if(k!=-1){a(j,false)}}}}if(Config.permalink.opacities!=null){for(var j in Config.permalink.opacities){if(Map.layers[j]!=undefined){var b=Math.round((255-Config.permalink.opacities[j])/255*100);Map.layers[j].transparency=b}}}if(Config.permalink.openLogin){if(Config.sslLogin&&UrlParams.useSSL&&!Gui.signedIn){$("#panelProperties").panel("open");$("#dlgLogin").popup("open")}}};Gui.loginStatus=function(a){if(a.success){$("#dlgLogin").popup("close");$("#buttonSignOut .ui-btn-text").html(I18n.login.signOut+" - "+a.user);$("#panelProperties").panel("close")}Gui.toggleLogin(a.success)};Gui.login=function(a){if(a.success){Topics.loadTopics(Config.data.topicsUrl,Gui.loadTopics);$("#dlgLogin").popup("close");$("#buttonSignOut .ui-btn-text").html(I18n.login.signOut+" - "+a.user);Gui.toggleLogin(true);$("#panelProperties").panel("close")}else{alert(I18n.login.signInFailed)}};Gui.logout=function(){Topics.loadTopics(Config.data.topicsUrl,Gui.loadTopics);Gui.toggleLogin(false)};Gui.toggleLogin=function(a){Gui.signedIn=a;$("#buttonLogin").toggle(!a);$("#buttonSignOut").toggle(a)};Gui.initViewer=function(){Gui.updateTranslations();Gui.updateLayout();$(window).on("resize",function(){Gui.updateLayout()});Map.setWindowOrientation(window.orientation);$(window).on("orientationchange",function(f){Map.setWindowOrientation(window.orientation)});Map.createMap();Gui.updateLayout();$("#buttonTopics").on("tap",function(){Gui.panelSelect("panelTopics")});$("#buttonLayerAll").on("tap",function(){Gui.panelSelect("panelLayerAll")});$("#buttonLayerOrder").on("tap",function(){Gui.panelSelect("panelLayerOrder")});$("#switchFollow").val(Config.defaultProperties.following?"on":"off");$("#switchFollow").slider("refresh");Gui.toggleFollowing(Config.defaultProperties.following);$("#switchOrientation").val(Config.defaultProperties.orientation?"on":"off");$("#switchOrientation").slider("refresh");Gui.toggleOrientation(Config.defaultProperties.orientation);$("#switchScale").val(Config.defaultProperties.scalebar?"on":"off");$("#switchScale").slider("refresh");Map.toggleScalebar(Config.defaultProperties.scalebar);Topics.loadTopics(Config.data.topicsUrl,Gui.loadTopics);$("#topicList").delegate("li.topic","vclick",function(f){Gui.selectTopic($(this).data("topic"));Gui.panelSelect("panelLayerAll")});$("#panelLayerAll").delegate(":checkbox[data-layer]","change",function(g){var f=(Map.visibleLayers().indexOf($(this).data("layer"))!=-1);if(f!=$(this).is(":checked")){Map.setLayerVisible($(this).data("layer"),$(this).is(":checked"),false);Gui.updateLayerOrder($(this).data("layer"),$(this).is(":checked"))}});Gui.panelSelect("panelTopics");$("#listOrder").delegate("li","vclick",function(){Gui.selectLayer($(this).data("layer"))});$("#sliderTransparency").on("slidestop",function(){Map.setLayerTransparency(Gui.selectedLayer,$(this).val(),true)}).parent().on("swipeleft",function(g,f){g.stopPropagation()});$(document).on("maprotation",function(f){$("#btnCompass").find(".ui-icon").css("transform","rotate("+f.rotation+"rad)")});$("#btnCompass").on("tap",function(){Map.setRotation(0)});$("#btnLocation").on("tap",function(){Gui.tracking=!Gui.tracking;$("#btnLocation .ui-icon").toggleClass("ui-icon-location_off",!Gui.tracking);$("#btnLocation .ui-icon").toggleClass("ui-icon-location_on",Gui.tracking);Map.toggleTracking(Gui.tracking);Map.toggleFollowing(Gui.tracking&&Gui.following)});var c=new FeatureInfo(Gui.showFeatureInfoResults);Map.registerClickHandler("featureInfo",c);Map.activateClickHandler("featureInfo");$("#panelFeatureInfo").on("panelclose",function(){Map.toggleClickMarker(false)});$("#featureInfoResults").parent().on("swipeleft",function(g,f){g.stopPropagation()});var b=function(){$("#searchResults").hide();Map.setHighlightLayer(null)};$("#searchInput").bind("change",function(f){if($(this).val()==""){b()}});$("#searchForm").bind("submit",function(g){b();var f=$("#searchInput").val();if(f!=""){Config.search.submit(f,Gui.showSearchResults);$("#searchInput").blur()}g.preventDefault();g.stopPropagation()});$("#searchResultsList").delegate("li","vclick",function(){if($(this).data("bbox")!=null){Gui.jumpToSearchResult($(this).data("bbox"));e.stopPropagation()}if($(this).data("highlight")!=undefined){Config.search.highlight($(this).data("highlight"),Map.setHighlightLayer)}});$("#switchFollow").on("change",function(f){Gui.toggleFollowing($(this).val()=="on")}).parent().on("swiperight",function(g,f){g.stopPropagation()});$("#switchOrientation").on("change",function(f){Gui.toggleOrientation($(this).val()=="on")}).parent().on("swiperight",function(g,f){g.stopPropagation()});$("#switchScale").on("change",function(f){Map.toggleScalebar($(this).val()=="on")}).parent().on("swiperight",function(g,f){g.stopPropagation()});$("#aboutContent").html(I18n.about.content);$("#buttonShare").toggle(!Config.gui.hideShareButton);$("#buttonLogin").toggle(!Config.gui.hideLoginButton);$("#buttonLoginSSL").hide();$("#buttonSignOut").hide();if(!Config.gui.hideLoginButton){if(Config.sslLogin&&!UrlParams.useSSL){var a=UrlParams.baseUrl.replace(/^http:/,"https:");var d=$.extend({openLogin:true},UrlParams.params);a+="?"+$.param(d);$("#buttonLoginSSL").attr("href",a);$("#buttonLoginSSL").show();$("#buttonLogin").hide()}else{$("#buttonSignIn").on("tap",function(){Config.login.signIn($("#user").val(),$("#password").val(),Gui.login)});$("#buttonLoginCancel").on("tap",function(){$("#dlgLogin").popup("close")});$("#buttonSignOut").on("tap",function(){Config.login.signOut(Gui.logout)});Config.login.status(Gui.loginStatus)}}$("#panelFeatureInfo, #panelLayer, #panelSearch").on("panelopen",function(){Map.toggleClickHandling(false)});$("#panelFeatureInfo, #panelLayer, #panelSearch").on("panelclose",function(){Map.toggleClickHandling(true)});Config.customInitViewer()};$(document).ready(function(a){UrlParams.parse();Config.permalink.read(UrlParams.params,Gui.initViewer)});